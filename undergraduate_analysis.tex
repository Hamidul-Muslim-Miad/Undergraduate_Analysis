\documentclass{book}
\PassOptionsToPackage{prologue,dvipsnames}{xcolor}
\usepackage{graphicx}
\usepackage{amsfonts}
\usepackage{pgfplots}
\usepackage{ulem}
\pgfplotsset{compat=1.18}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{skull}
\usepackage{array}
\usepackage{tcolorbox}
\usepackage[dvipsnames]{xcolor}
\usepackage{sectsty}
\usepackage{mathrsfs}
\usepackage{fancyhdr}
\usepackage{physics}
\usepackage{chngcntr}
\usepackage{multicol}
\usepackage[toc,page]{appendix}
\usepackage{pifont}
\usepackage{float}
\usepackage{tikz}
\usetikzlibrary{calc, decorations.pathmorphing, arrows.meta, positioning}
\usepackage{bm}
\usepackage[a4paper, total={7in, 9in}]{geometry}
\usepackage{titlesec}
\usepackage{lmodern}
\usepackage[strict]{changepage}
\usepackage{etoolbox}
\usepackage{enumitem}
\setlistdepth{6}
\setlist[enumerate,1]{label=$\arabic*.$}
\setlist[enumerate,2]{label=$\alph*.$}
\setlist[enumerate,3]{label=$\Roman*.$}
\setlist[enumerate,4]{label=$\Alph*.$}
\setlist[enumerate,5]{label=$\alpha*$}
\setlist[enumerate,6]{label=$\textbf{\Roman*.}$}
\setlist[enumerate,7]{label=$\textbf{\arabic*.}$}
\setlist[enumerate,8]{label=$\textbf{\alph*.}$}
\setlist[enumerate,9]{label=$\textbf{\roman*.}$}
\renewlist{enumerate}{enumerate}{9}
\usepackage[colorlinks=true, linkcolor=Aquamarine!90!black, urlcolor=blue, citecolor=blue]{hyperref}
\usepackage{cleveref}
\usepackage{etoolbox}
\setcounter{tocdepth}{4}
\setcounter{secnumdepth}{4}
\pagestyle{fancyplain}
\fancyhf{}
\fancyhead[R]{\thepage}
\renewcommand{\headrulewidth}{0pt}
\chapterfont{\color{teal}}
\sectionfont{\color{violet}}
\subsectionfont{\color{olive}}
\subsubsectionfont{\color{PineGreen}}
\numberwithin{equation}{subsection}
\renewcommand*\contentsname{Table of Contents}
\newcommand{\toclinkcolor}{black} % <-- change this to the ToC color you want

\makeatletter
\pretocmd{\tableofcontents}{\begingroup\hypersetup{linkcolor=\toclinkcolor}}{}{}
\apptocmd{\tableofcontents}{\endgroup}{}{}
\makeatother
\tolerance=1
\emergencystretch=\maxdimen
\hyphenpenalty=10000
\hbadness=10000
\makeatletter
\newcommand{\blfootnote}[1]{%
  \begingroup
  \renewcommand{\thefootnote}{}% Remove footnote number
  \footnote{#1}% Add footnote text
  \addtocounter{footnote}{-1}% Decrement counter to maintain numbering
  \endgroup
}
\makeatother
\renewcommand{\theequation}{\thesection.\arabic{equation}}
\newcounter{definition}[section]
\renewcommand{\thedefinition}{\thesection.\arabic{definition}}


\newenvironment{Definition}[1]{
    \refstepcounter{definition}
    \begin{tcolorbox}[
        colback=red!5!white,
        colframe=red!75!black,
        title={Definition \thedefinition: #1}
    ]
}{%
    \end{tcolorbox}
}
\newcounter{query}[section]
\renewcommand{\thequery}{\thesection.\arabic{query}}
\newenvironment{Query}[1]{
    \refstepcounter{query}
    \begin{tcolorbox}[
        colback=ForestGreen!5!white,
        colframe=ForestGreen!55!black,
        title={Query \thequery: #1}
    ]
}{%
    \end{tcolorbox}
}
\newcounter{lemma}[section]
\renewcommand{\thelemma}{\thesection.\arabic{lemma}}
\newenvironment{Lemma}[1]{%
    \refstepcounter{lemma}%
    \begin{tcolorbox}[
        width=\linewidth-3cm, % Match lemma_proof's 1.5cm indentation on both sides
        center, % Center the narrower box
        colback=Gray!5!white,
        colframe=Gray!50!black,
        title={Lemma \thelemma: #1}
    ]
}{%
    \end{tcolorbox}%
}
\newcounter{theorem}[section]
\renewcommand{\thetheorem}{\thesection.\arabic{theorem}}


\newenvironment{Theorem}[1]{
    \refstepcounter{theorem}
    \begin{tcolorbox}[
        colback=RoyalPurple!5!white,
        colframe=RoyalPurple!100!black,
        title={Theorem \thetheorem: #1}
    ]
}{%
    \end{tcolorbox}
}
\newcounter{example}[section]
\renewcommand{\theexample}{\thesection.\arabic{example}}


\newenvironment{Example}{
    \refstepcounter{example}
    \begin{tcolorbox}[
        colback=YellowOrange!10!white,
        colframe=YellowOrange!80!black,
        title={Illustrative Example \theexample}
    ]
}{%
    \end{tcolorbox}
}
\newcounter{trick}
\renewcommand{\thetrick}{\arabic{trick}}

\newenvironment{Trick}[1]{
    \refstepcounter{trick}
    \begin{tcolorbox}[
        colback=Cyan!5!white,
        colframe=Cyan!75!black,
        title={Trick \thetrick: #1}
    ]
}{
    \end{tcolorbox}
}
\renewenvironment{proof}[1][Proof]{
  \par\noindent\textbf{\textit{#1. }}
}{
  \hfill$\blacksquare$\par\vspace{6pt}
}
\newenvironment{Investigation}{%
    \par\noindent\textbf{\textit{Investigation.}}~ % Bold & Italic title with dot
    \ignorespaces
}{%
    \hfill$\blacksquare$\par\vspace{6pt} % Black-filled square at the end with spacing
}
\makeatletter
\newenvironment{lemma_proof}{%
  \begin{adjustwidth}{1.5cm}{1.5cm}% Adjust indentation on both sides
  \par\pushQED{\qed}% Initialize QED system
  \normalfont \topsep6\p@\@plus6\p@\relax % Vertical spacing
  \trivlist % Start environment
  \item[\hskip\labelsep
        \bfseries\itshape % Bold italic title
        Proof of Lemma.\@addpunct{.}] % Title with proper punctuation
  \ignorespaces
}{%
  \popQED\endtrivlist\@endpefalse % End environment and QED
  \end{adjustwidth}%
}
\makeatother

\newcounter{exercise}[chapter]
\renewcommand{\theexercise}{\thechapter\Alph{exercise}}
\counterwithin*{exercise}{chapter} % Reset counter each chapter, but don't show chapter number in counter

\newcommand{\exercise}{%
    \refstepcounter{exercise}%
    \section*{Exercise \theexercise}%
}

\title{Undergraduate Mathematical Analysis}
\author{Hamidul Muslim Miad}
\date{13 August, 2024}
\begin{document}
\frontmatter

\thispagestyle{empty}
\maketitle
\clearpage
\pagenumbering{roman}
\tableofcontents
\mainmatter
\setcounter{chapter}{-1}
\part*{Part A: The Fundamentals}
\addcontentsline{toc}{part}{\protect{}Part A: The Fundamentals}
\input{the_foundations}
\part*{Part B: Topology}
\addcontentsline{toc}{part}{\protect{}Part B: Topology}
\input{topology}
\part*{Part C: Measure Theory \& Integration}
\addcontentsline{toc}{part}{\protect{}Part C: Measure Theory \& Integration}
\input{measure_and_integration}
\part*{Part D: Differential Geometry}
\addcontentsline{toc}{part}{\protect{}Part D: Differential Geometry}
\input{differential_geometry}
\part*{Part E: Complex Analysis}
\addcontentsline{toc}{part}{\protect{}Part E: Complex Analysis}
\input{complex_analysis}
\part*{Part F: Functional Analysis}
\addcontentsline{toc}{part}{\protect{}Part F: Functional Analysis}
\input{functional_analysis}
\part*{Part F: Special Functions}
\addcontentsline{toc}{part}{\protect{}Part F: Special Functions}
\input{special_functions}
\part*{Part G: Miscellaneous Topics}
\addcontentsline{toc}{part}{\protect{}Part G: Miscellaneous Topics}
\input{open_problems}
\input{interesting_examples}
\nocite{*}
\backmatter
\bibliographystyle{alpha}
\bibliography{undergraduate_analysis}
\end{document}